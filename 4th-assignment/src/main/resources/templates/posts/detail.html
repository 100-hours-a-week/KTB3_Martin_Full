<!DOCTYPE html>
<html xmlns:th="<http://www.thymeleaf.org>">
<head>
    <meta charset="UTF-8">
    <title>게시글 상세 페이지</title>
</head>
<body>
<h1 th:text = "${post.title}"></h1>

<p th:text = "${post.content}"></p>


<hr>

<h2>댓글</h2>

<!-- 댓글 목록 출력 -->
<div th:if="${#lists.isEmpty(comments)}">
    <p>아직 댓글이 없습니다.</p>
</div>

<ul th:if="${!#lists.isEmpty(comments)}">
    <li th:each="comment : ${comments}">
<!--        <b th:text="${comment.author}">작성자</b> :-->
        <span th:text="${comment.content}">내용</span>
        <form th:action="@{/comments/{postId}/{commentId} (postId=${post.id}, commentId=${comment.id})}"
              method="post">
            <a th:href="@{/comments/{postId}/{commentId}(postId=${post.id}, commentId=${comment.id})}">수정 </a>
            <input type="hidden" name="_method" value="delete">
            <button type="submit">삭제</button>
        </form>
    </li>
</ul>

<form th:action="@{/comments/{id}(id=${post.id})}" th:object="${newcomment}" method="post">
    <input type="text" th:field="*{content}" /><br>
    <button type="submit" th:text="댓글저장"></button><br><br>
</form>

<hr>



<!--<a th:href="@{/posts/{id}/form(id=${post.id})}">목록으로 돌아가기</a>-->
<br>

<a th:href="@{/posts/{id}/form(id=${post.id})}">수정</a>
<form th:action="@{/posts/{id}(id=${post.id})}" method="post">
    <input type="hidden" name="_method" value="delete">
    <button type="submit">삭제</button>
</form>
<a href = "/posts">목록으로 돌아가기</a>



</body>
</html>